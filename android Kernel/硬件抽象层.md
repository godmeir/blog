### 硬件抽象层（Hardware Abstract Layer,HAL）
#### 1、什么是HAL
android的硬件抽象层运行在用户空间中，向下屏蔽硬件驱动模块的实现细节，向上提供硬件访问服务。通过将android系统分两层来支持硬件设备，其中的一层实现在用户空间，另一层在内核空间。而传统的linux系统把对硬件的支持完全实现在内核空间中，把对硬件的支持完全实现在硬件驱动模块中。

android把对硬件的支持分层的原因是：Linux内核源码遵循GPL协议。android源码支持Apache License协议。为最大程度保护硬件厂商的利益，避免暴露硬件的实现细节和参数，需要将对硬件的支持完全实现在android系统的用户空间中。但只有内核空间才能才有操作硬件设备的权限，因此解决方案变成了，内核空间使用硬件驱动模式的形式支持，但仅仅提供简单的硬件访问通道，而用户空间以硬件抽象层模块的形式支持，它封装了硬件的实现细节和参数。

#### 2、硬件抽象层模块编写
每一个硬件抽象层模块在内核中都对应一个驱动程序，硬件抽象层通过这些驱动程序来访问硬件设备。硬件抽象层模块是由系统统一加载的。

#### 3、anroid硬件访问服务
开发好硬件抽象层之后，我们还需要在程序框架层添加一个硬件访问服务，硬件访问服务通过硬件抽象层模块来为应用程序提供读写操作，由于硬件抽象层模块由c++开发，而应用程序框架层中的硬件服务是使用java开发的，因此硬件访问服务必须通过java本地接口（jave native interface）来调用硬件抽象层模块接口.

android系统的硬件访问服务通常运行在系统进程system中，使用硬件访问服务的应用程序运行在其他的进程中，应用程序需要使用进程间通信机制来访问硬件访问服务，android系统提供了Binder机制。Binder机制要求提供服务的一方必须实现一个具有跨进程访问能力服务接口，